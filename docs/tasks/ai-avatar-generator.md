# AI å¤´åƒç”ŸæˆåŠŸèƒ½è§„åˆ’æ–‡æ¡£

## ğŸ“‹ éœ€æ±‚ç†è§£

### æ ¸å¿ƒéœ€æ±‚
ç”¨æˆ·å¸Œæœ›å®ç°ä¸€ä¸ªåŠŸèƒ½ï¼š**ç”¨æˆ·ä¸Šä¼ ç…§ç‰‡ï¼Œé€šè¿‡ AI ç”Ÿæˆ Notion Avatar æ‰‹ç»˜é£æ ¼çš„å¤´åƒå›¾ç‰‡**ã€‚

### åŠŸèƒ½è¦ç‚¹
1. **å›¾ç‰‡ä¸Šä¼ **ï¼šç”¨æˆ·å¯ä»¥æ‰‹åŠ¨ä¸Šä¼ è‡ªå·±çš„ç…§ç‰‡
2. **AI é£æ ¼è½¬æ¢**ï¼šå°†ä¸Šä¼ çš„ç…§ç‰‡è½¬æ¢ä¸º Notion Avatar çš„æ‰‹ç»˜é£æ ¼
3. **UI ä¸€è‡´æ€§**ï¼šæ–°åŠŸèƒ½çš„ç•Œé¢é£æ ¼éœ€ä¸ç°æœ‰ç½‘ç«™ä¿æŒä¸€è‡´
4. **æ‰‹ç»˜é£æ ¼**ï¼šç”Ÿæˆçš„å¤´åƒéœ€è¦ä¿æŒ Notion Avatar ç‰¹æœ‰çš„æ‰‹ç»˜çº¿æ¡é£æ ¼

### ç°æœ‰é¡¹ç›®æŠ€æœ¯æ ˆ
- **æ¡†æ¶**: Next.js 13 (Pages Router)
- **è¯­è¨€**: TypeScript
- **æ ·å¼**: TailwindCSS
- **å›½é™…åŒ–**: next-i18next
- **UI ç‰¹ç‚¹**: 
  - èƒŒæ™¯è‰² `#fffefc`
  - å­—ä½“ Quicksand
  - åœ†è§’æŒ‰é’® `rounded-full`
  - è¾¹æ¡†æ ·å¼ `border-3 border-black`
  - å¼¹çª—/Popover ç»„ä»¶å·²æœ‰å°è£…

---

## âœ… å·²ç¡®è®¤å†³ç­–

| é—®é¢˜ | å†³ç­– |
|------|------|
| **AI æœåŠ¡** | Gemini 2.5 Flash (Nano Banana) - `gemini-2.5-flash-preview-04-17` |
| **ç”¨æˆ·æµç¨‹** | ç‹¬ç«‹æ–°é¡µé¢ `/ai-generator` |
| **ç”Ÿæˆç»“æœ** | ç›´æ¥è¾“å‡ºå®Œæ•´å›¾ç‰‡ |
| **è´¹ç”¨æ¨¡å¼** | ç”¨æˆ·ä»˜è´¹ + æ¯æ—¥å…è´¹ 1 å¼  |
| **API Key** | å¾…åç»­é…ç½® (ç¯å¢ƒå˜é‡ `GEMINI_API_KEY`) |

---

## ğŸ’¡ è§£å†³æ–¹æ¡ˆ

### AI æœåŠ¡: Gemini 2.5 Flash (Nano Banana)

Google Gemini 2.5 Flash æ”¯æŒåŸç”Ÿå›¾åƒç”Ÿæˆï¼Œå¯ä»¥ï¼š
- æ ¹æ®æ–‡æœ¬æç¤ºç”Ÿæˆå›¾åƒ
- å¯¹ç°æœ‰å›¾åƒè¿›è¡Œé£æ ¼è½¬æ¢ï¼ˆimg2imgï¼‰
- æ”¯æŒå›¾åƒç¼–è¾‘å’Œæ··åˆ

**æ¨¡å‹**: `gemini-2.5-flash-preview-04-17` æˆ– `gemini-2.0-flash-exp`
**SDK**: `@google/genai`

```javascript
// ç¤ºä¾‹ä»£ç 
import { GoogleGenAI } from '@google/genai';

const GENAI = new GoogleGenAI({ apiKey: process.env.GEMINI_API_KEY });
const CONFIG = { responseModalities: ['Text', 'Image'] };

const response = await GENAI.models.generateContent({
  model: 'gemini-2.0-flash-exp',
  contents: [
    { text: PROMPT },
    { inlineData: { mimeType: 'image/jpeg', data: base64Image } }
  ],
  config: CONFIG
});
```

### æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   å‰ç«¯é¡µé¢ /ai-generator                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ å›¾ç‰‡ä¸Šä¼ ç»„ä»¶ â”‚ â†’ â”‚  ç”ŸæˆçŠ¶æ€   â”‚ â†’ â”‚ ç»“æœå±•ç¤ºç»„ä»¶ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              æ¯æ—¥å…è´¹æ¬¡æ•°æç¤º / ä»˜è´¹å…¥å£              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   API Route (Next.js)                    â”‚
â”‚              /api/ai/generate-avatar                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1. æ£€æŸ¥ç”¨æˆ·æ¯æ—¥å…è´¹é¢åº¦ (localStorage/IP)               â”‚
â”‚  2. æ¥æ”¶ä¸Šä¼ å›¾ç‰‡ (Base64)                                â”‚
â”‚  3. è°ƒç”¨ Gemini API                                      â”‚
â”‚  4. è¿”å›ç”Ÿæˆç»“æœ                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Google Gemini API                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Model: gemini-2.0-flash-exp / gemini-2.5-flash-preview â”‚
â”‚  Config: { responseModalities: ['Text', 'Image'] }      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Prompt å·¥ç¨‹

ä¸ºäº†ç”Ÿæˆç¬¦åˆ Notion Avatar é£æ ¼çš„å›¾ç‰‡ï¼Œéœ€è¦ç²¾å¿ƒè®¾è®¡ promptï¼š

```
Transform this photo into a Notion Avatar style illustration:
- Hand-drawn minimalist line art style
- Simple black outline strokes (similar to Notion's avatar style)
- Clean white/cream background (#fffefc)
- Cute cartoon portrait style
- Keep the person's key facial features recognizable
- Single person, head and shoulders only
- Vector art aesthetic with slight hand-drawn imperfection
- No realistic shading, use simple flat colors if any
```

### æ¯æ—¥å…è´¹é¢åº¦å®ç°

ä½¿ç”¨ localStorage å­˜å‚¨ç”¨æˆ·å½“æ—¥ä½¿ç”¨æ¬¡æ•°ï¼š

```typescript
interface DailyUsage {
  date: string;      // YYYY-MM-DD
  count: number;     // å½“æ—¥å·²ä½¿ç”¨æ¬¡æ•°
}

const FREE_DAILY_LIMIT = 1;

function checkDailyLimit(): boolean {
  const today = new Date().toISOString().split('T')[0];
  const usage = JSON.parse(localStorage.getItem('ai_usage') || '{}');
  
  if (usage.date !== today) {
    return true; // æ–°çš„ä¸€å¤©ï¼Œå¯ä»¥ä½¿ç”¨
  }
  return usage.count < FREE_DAILY_LIMIT;
}
```

---

## ğŸ“ å®æ–½æ‹†è§£

### Phase 1: åŸºç¡€è®¾æ–½æ­å»º
- [ ] 1.1 å®‰è£…ä¾èµ– `@google/genai`
- [ ] 1.2 åˆ›å»º AI ç”Ÿæˆç›¸å…³çš„ç±»å‹å®šä¹‰ (`src/types/ai.ts`)
- [ ] 1.3 åˆ›å»º Gemini API å°è£… (`src/lib/gemini.ts`)
- [ ] 1.4 åˆ›å»º API Route `/api/ai/generate-avatar`
- [ ] 1.5 é…ç½®ç¯å¢ƒå˜é‡ `GEMINI_API_KEY`
- [ ] 1.6 æ·»åŠ å›½é™…åŒ–æ–‡æ¡ˆ (ä¸­/è‹±)

### Phase 2: å‰ç«¯é¡µé¢å¼€å‘
- [ ] 2.1 åˆ›å»ºæ–°é¡µé¢ `/ai-generator` (`src/pages/ai-generator.tsx`)
- [ ] 2.2 åˆ›å»ºå›¾ç‰‡ä¸Šä¼ ç»„ä»¶ `ImageUploader`
- [ ] 2.3 åˆ›å»ºç”ŸæˆçŠ¶æ€ç»„ä»¶ `GeneratingStatus`
- [ ] 2.4 åˆ›å»ºç»“æœå±•ç¤ºç»„ä»¶ `GeneratedResult`
- [ ] 2.5 åˆ›å»ºæ¯æ—¥é¢åº¦æç¤ºç»„ä»¶ `DailyLimitBanner`
- [ ] 2.6 æ·»åŠ é¡µé¢å¯¼èˆªå…¥å£ (Header)

### Phase 3: åŠŸèƒ½å®Œå–„
- [ ] 3.1 å®ç°æ¯æ—¥å…è´¹é¢åº¦æ£€æŸ¥
- [ ] 3.2 æ·»åŠ é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶
- [ ] 3.3 å›¾ç‰‡å‹ç¼©ä¼˜åŒ–ï¼ˆä¸Šä¼ å‰å‹ç¼©ï¼‰
- [ ] 3.4 æ·»åŠ ä¸‹è½½åŠŸèƒ½

### Phase 4: æµ‹è¯•ä¸ä¼˜åŒ–
- [ ] 4.1 åŠŸèƒ½æµ‹è¯•
- [ ] 4.2 UI/UX æµ‹è¯•ï¼ˆå“åº”å¼ï¼‰
- [ ] 4.3 Prompt è°ƒä¼˜
- [ ] 4.4 éƒ¨ç½²ä¸Šçº¿

---

## ğŸ“ æ–‡ä»¶ç»“æ„è§„åˆ’

```
src/
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ ai-generator.tsx                # AI ç”Ÿæˆç‹¬ç«‹é¡µé¢
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â””â”€â”€ ai/
â”‚   â”‚       â””â”€â”€ generate-avatar.ts      # AI ç”Ÿæˆ API
â”‚   â””â”€â”€ components/
â”‚       â””â”€â”€ AIGenerator/
â”‚           â”œâ”€â”€ index.tsx               # ä¸»å®¹å™¨ç»„ä»¶
â”‚           â”œâ”€â”€ ImageUploader.tsx       # å›¾ç‰‡ä¸Šä¼ 
â”‚           â”œâ”€â”€ GeneratingStatus.tsx    # ç”ŸæˆçŠ¶æ€
â”‚           â”œâ”€â”€ GeneratedResult.tsx     # ç»“æœå±•ç¤º
â”‚           â””â”€â”€ DailyLimitBanner.tsx    # æ¯æ—¥é¢åº¦æç¤º
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ useAIGenerator.ts               # AI ç”Ÿæˆé€»è¾‘ Hook
â”œâ”€â”€ lib/
â”‚   â””â”€â”€ gemini.ts                       # Gemini API å°è£…
â””â”€â”€ types/
    â””â”€â”€ ai.ts                           # AI ç›¸å…³ç±»å‹å®šä¹‰

public/
â”œâ”€â”€ icon/
â”‚   â””â”€â”€ ai-magic.svg                    # AI ç”Ÿæˆå›¾æ ‡
â””â”€â”€ locales/
    â”œâ”€â”€ en/common.json                  # è‹±æ–‡æ–‡æ¡ˆæ›´æ–°
    â””â”€â”€ zh/common.json                  # ä¸­æ–‡æ–‡æ¡ˆæ›´æ–°
```

---

## ğŸ¨ UI è®¾è®¡è§„èŒƒ

ä¸ºä¿æŒä¸ç°æœ‰ç½‘ç«™é£æ ¼ä¸€è‡´ï¼Œæ–°ç»„ä»¶éœ€éµå¾ªï¼š

### é¢œè‰²
- ä¸»èƒŒæ™¯: `#fffefc`
- è¾¹æ¡†/æ–‡å­—: `#000000`
- æŒ‰é’®æ‚¬åœ: `hover:bg-gray-50`

### æŒ‰é’®æ ·å¼
```tsx
// ä¸»è¦æŒ‰é’®
className="border-3 border-black text-black font-bold py-2 px-4 rounded-full"

// æ¬¡è¦æŒ‰é’®
className="bg-black text-white font-bold py-2 px-4 rounded-full"
```

### å¼¹çª—æ ·å¼
- ä½¿ç”¨ç°æœ‰ `Modal` ç»„ä»¶å°è£…
- æˆ–ä½¿ç”¨ `Popover` ç»„ä»¶é£æ ¼

### å›¾æ ‡
- ä½¿ç”¨ SVG å›¾æ ‡ï¼Œæ”¾ç½®äº `/public/icon/`
- é£æ ¼ä¸ç°æœ‰å›¾æ ‡ä¿æŒä¸€è‡´ï¼ˆçº¿æ¡é£æ ¼ï¼‰

---

## âš ï¸ é£é™©ä¸æ³¨æ„äº‹é¡¹

1. **API æˆæœ¬æ§åˆ¶**: æ¯æ—¥å…è´¹ 1 å¼  + ä»˜è´¹æ¨¡å¼
2. **ç”Ÿæˆæ—¶é—´**: Gemini ç”Ÿæˆé€šå¸¸éœ€è¦ 5-15 ç§’ï¼Œéœ€è¦è‰¯å¥½çš„åŠ è½½çŠ¶æ€æç¤º
3. **ç”Ÿæˆè´¨é‡**: å¯èƒ½éœ€è¦å¤šæ¬¡è°ƒè¯• prompt æ‰èƒ½è¾¾åˆ°ç†æƒ³æ•ˆæœ
4. **éšç§å®‰å…¨**: ç”¨æˆ·ä¸Šä¼ çš„ç…§ç‰‡ä»…ç”¨äºç”Ÿæˆï¼Œä¸åšæœåŠ¡ç«¯å­˜å‚¨
5. **é”™è¯¯å¤„ç†**: AI æœåŠ¡å¯èƒ½å¤±è´¥ï¼Œéœ€è¦å‹å¥½çš„é”™è¯¯æç¤ºå’Œé‡è¯•æœºåˆ¶
6. **API Key å®‰å…¨**: ç¡®ä¿ `GEMINI_API_KEY` ä»…åœ¨æœåŠ¡ç«¯ä½¿ç”¨

---

## ğŸ“Š è¿›åº¦è¿½è¸ª

| é˜¶æ®µ | çŠ¶æ€ | å¼€å§‹æ—¶é—´ | å®Œæˆæ—¶é—´ | å¤‡æ³¨ |
|------|------|----------|----------|------|
| Phase 1 | âœ… å·²å®Œæˆ | 2024-12-20 | 2024-12-20 | åŸºç¡€è®¾æ–½ |
| Phase 2 | âœ… å·²å®Œæˆ | 2024-12-20 | 2024-12-20 | å‰ç«¯é¡µé¢ |
| Phase 3 | âœ… å·²å®Œæˆ | 2024-12-20 | 2024-12-20 | åŠŸèƒ½å®Œå–„ |
| Phase 4 | â³ å¾…æµ‹è¯• | - | - | éœ€é…ç½® API Key |

---

## ğŸ“Œ å®æ–½å®Œæˆ

**æ‰€æœ‰å¼€å‘å·¥ä½œå·²å®Œæˆï¼**

### å·²å®Œæˆé¡¹ç›®ï¼š
1. âœ… å®‰è£… `@google/genai` ä¾èµ–
2. âœ… åˆ›å»ºç±»å‹å®šä¹‰ (`src/types/ai.ts`)
3. âœ… åˆ›å»º Gemini API å°è£… (`src/lib/gemini.ts`)
4. âœ… åˆ›å»º API Route (`src/pages/api/ai/generate-avatar.ts`)
5. âœ… åˆ›å»ºå‰ç«¯é¡µé¢ (`src/pages/ai-generator.tsx`)
6. âœ… åˆ›å»ºå‰ç«¯ç»„ä»¶:
   - `ImageUploader` - å›¾ç‰‡ä¸Šä¼ 
   - `GeneratingStatus` - ç”ŸæˆçŠ¶æ€
   - `GeneratedResult` - ç»“æœå±•ç¤º
   - `DailyLimitBanner` - æ¯æ—¥é¢åº¦æç¤º
7. âœ… æ·»åŠ  Header å¯¼èˆªå…¥å£
8. âœ… æ·»åŠ ä¸­è‹±æ–‡å›½é™…åŒ–æ–‡æ¡ˆ

### å¾…å®Œæˆï¼š
- â³ é…ç½® `GEMINI_API_KEY` ç¯å¢ƒå˜é‡
- â³ å®é™… AI ç”Ÿæˆæµ‹è¯•
- â³ ä»˜è´¹åŠŸèƒ½é›†æˆï¼ˆå¯é€‰ï¼‰

### å¦‚ä½•æµ‹è¯•ï¼š
1. åœ¨ `.env` æ–‡ä»¶ä¸­æ·»åŠ  `GEMINI_API_KEY=your_api_key`
2. è®¿é—® http://localhost:3001/ai-generator
3. ä¸Šä¼ ç…§ç‰‡æµ‹è¯•ç”ŸæˆåŠŸèƒ½
